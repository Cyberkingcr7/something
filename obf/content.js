const a3_0x32e586=a3_0x2243;(function(_0x3c3555,_0x379494){const _0x5504cb=a3_0x2243,_0x483686=_0x3c3555();while(!![]){try{const _0x3ba64d=parseInt(_0x5504cb(0x1fc))/0x1+-parseInt(_0x5504cb(0x258))/0x2*(-parseInt(_0x5504cb(0x23c))/0x3)+-parseInt(_0x5504cb(0x1ae))/0x4+parseInt(_0x5504cb(0x1ac))/0x5+-parseInt(_0x5504cb(0x228))/0x6*(parseInt(_0x5504cb(0x1d9))/0x7)+parseInt(_0x5504cb(0x1a0))/0x8+parseInt(_0x5504cb(0x1c3))/0x9*(-parseInt(_0x5504cb(0x24a))/0xa);if(_0x3ba64d===_0x379494)break;else _0x483686['push'](_0x483686['shift']());}catch(_0x2454a6){_0x483686['push'](_0x483686['shift']());}}}(a3_0x369b,0xf0836));let isBusy=![],leftClickEnabled=!![],sentenceBuffer=[],copyTimeout=null;async function safeGetStorage(_0x55108e,_0xb1ee47=0x3,_0x910cdc=0xc8){const _0x16979b=a3_0x2243;for(let _0x343567=0x0;_0x343567<_0xb1ee47;_0x343567++){try{if(!chrome?.[_0x16979b(0x1ba)]?.[_0x16979b(0x239)])throw new Error(_0x16979b(0x1dd));const _0x2fe644=await new Promise((_0x146409,_0x114bf6)=>{const _0x3e3ee6=_0x16979b;chrome[_0x3e3ee6(0x1ba)][_0x3e3ee6(0x239)]['get'](_0x55108e,_0x2f8f4d=>{const _0x3deb6d=_0x3e3ee6;if(chrome[_0x3deb6d(0x1da)][_0x3deb6d(0x1e9)])_0x114bf6(chrome['runtime'][_0x3deb6d(0x1e9)]);else _0x146409(_0x2f8f4d||{});});});return _0x2fe644;}catch(_0x36ada3){console[_0x16979b(0x253)](_0x16979b(0x1c5)+(_0x343567+0x1)+'\x20failed:',_0x36ada3);if(_0x343567<_0xb1ee47-0x1)await new Promise(_0x5db602=>setTimeout(_0x5db602,_0x910cdc));}}return console[_0x16979b(0x25b)]('safeGetStorage\x20failed\x20after\x20retries,\x20returning\x20empty\x20object.'),{};}async function safeSetStorage(_0xcebfc8,_0x314492=0x3,_0x98bde4=0xc8){const _0x313d56=a3_0x2243;for(let _0x615499=0x0;_0x615499<_0x314492;_0x615499++){try{if(!chrome?.[_0x313d56(0x1ba)]?.['local'])throw new Error('chrome.storage.local\x20unavailable');await new Promise((_0x263cc5,_0x3da9ea)=>{const _0x522c89=_0x313d56;chrome['storage'][_0x522c89(0x239)]['set'](_0xcebfc8,()=>{const _0x1d838b=_0x522c89;if(chrome[_0x1d838b(0x1da)][_0x1d838b(0x1e9)])_0x3da9ea(chrome['runtime']['lastError']);else _0x263cc5();});});return;}catch(_0x154c41){console['warn'](_0x313d56(0x1fd)+(_0x615499+0x1)+_0x313d56(0x1eb),_0x154c41);if(_0x615499<_0x314492-0x1)await new Promise(_0x48ad0d=>setTimeout(_0x48ad0d,_0x98bde4));}}console[_0x313d56(0x25b)](_0x313d56(0x1fa));}function setCursorLoading(_0x416f75){const _0x462f13=a3_0x2243;if(document[_0x462f13(0x1c6)])document[_0x462f13(0x1c6)][_0x462f13(0x20e)][_0x462f13(0x1f5)]=_0x416f75?_0x462f13(0x1a6):'';if(document[_0x462f13(0x215)])document[_0x462f13(0x215)][_0x462f13(0x20e)]['cursor']=_0x416f75?_0x462f13(0x1a6):'';}async function getClipboardText(){const _0x379627=a3_0x2243;try{return await navigator[_0x379627(0x259)][_0x379627(0x24f)]();}catch(_0x2f43d6){return console[_0x379627(0x25b)](_0x379627(0x1e1),_0x2f43d6),'';}}async function copyToClipboard(_0x1b8fc0){const _0x1512e8=a3_0x2243;try{await navigator[_0x1512e8(0x259)][_0x1512e8(0x1a4)](_0x1b8fc0);}catch{try{const _0x4d74cb=document[_0x1512e8(0x251)](_0x1512e8(0x244));_0x4d74cb[_0x1512e8(0x217)]=_0x1b8fc0,_0x4d74cb[_0x1512e8(0x20e)][_0x1512e8(0x1d2)]='fixed',_0x4d74cb[_0x1512e8(0x20e)]['top']=_0x1512e8(0x213),document[_0x1512e8(0x1c6)][_0x1512e8(0x232)](_0x4d74cb),_0x4d74cb[_0x1512e8(0x226)](),document['execCommand']('copy'),_0x4d74cb[_0x1512e8(0x1b0)]();}catch(_0x3dd757){console[_0x1512e8(0x25b)](_0x1512e8(0x1a3),_0x3dd757);}}}function a3_0x2243(_0xfe4ab5,_0x186b75){const _0x369bab=a3_0x369b();return a3_0x2243=function(_0x22430a,_0x59b9dc){_0x22430a=_0x22430a-0x1a0;let _0x323de7=_0x369bab[_0x22430a];return _0x323de7;},a3_0x2243(_0xfe4ab5,_0x186b75);}const SERVER_URL='https://clipkey-server.onrender.com/api/activate';async function activateKey(_0x386c9d){const _0x2b6b44=a3_0x2243;try{const _0x4abf9c=await fetch(SERVER_URL,{'method':_0x2b6b44(0x1d0),'headers':{'Content-Type':_0x2b6b44(0x229)},'body':JSON[_0x2b6b44(0x23e)]({'key':_0x386c9d})}),_0xc8fc0c=await _0x4abf9c['json']();if(_0xc8fc0c['status']==='ok')return await safeSetStorage({'expiryTimestamp':_0xc8fc0c[_0x2b6b44(0x1f3)],'userType':_0xc8fc0c[_0x2b6b44(0x235)],'apiKey':_0x386c9d}),!![];return![];}catch(_0x2ec5c2){return console['error']('activateKey\x20error:',_0x2ec5c2),![];}}async function isActivated(){const _0x9efbe4=a3_0x2243,{expiryTimestamp:_0x452b4a}=await safeGetStorage([_0x9efbe4(0x1bf)]);return _0x452b4a&&Date[_0x9efbe4(0x22d)]()<_0x452b4a;}async function getUserType(){const _0x1179ce=a3_0x2243,{userType:_0x45c55b}=await safeGetStorage(['userType']);return _0x45c55b||_0x1179ce(0x1fe);}async function getAIResponse(_0xd99b51){const _0x2baab7=a3_0x2243;try{const {apiKey:_0x3d2bd6}=await safeGetStorage([_0x2baab7(0x221)]);if(!_0x3d2bd6)return null;const _0x57beb0=await fetch(_0x2baab7(0x1aa),{'method':_0x2baab7(0x1d0),'headers':{'Content-Type':_0x2baab7(0x229)},'body':JSON['stringify']({'text':_0xd99b51,'apiKey':_0x3d2bd6})}),_0x31265b=await _0x57beb0[_0x2baab7(0x241)]();if(_0x31265b?.[_0x2baab7(0x20f)])console[_0x2baab7(0x22e)](_0x2baab7(0x1e0),_0x31265b[_0x2baab7(0x20f)]);return{'answer':_0x31265b?.[_0x2baab7(0x20d)]?.[_0x2baab7(0x1a7)]||null,'chunks':_0x31265b?.[_0x2baab7(0x20f)]||[]};}catch(_0x559328){return console[_0x2baab7(0x25b)]('getAIResponse\x20error:',_0x559328),null;}}async function getAIResponseWithGuide(_0xf7affe){const _0x286acc=a3_0x2243,{apiKey:_0x2a0b12,useGuide:_0x3bbe35,selectedSubject:_0x3b03cd}=await safeGetStorage([_0x286acc(0x221),_0x286acc(0x1f2),_0x286acc(0x1d7)]);if(_0x3bbe35&&_0x3b03cd&&_0x2a0b12)try{const _0xc7473b=await fetch(_0x286acc(0x203)+_0x2a0b12),_0x532871=await _0xc7473b[_0x286acc(0x241)]();if(_0x532871[_0x286acc(0x201)]==='ok'&&_0x532871[_0x286acc(0x23f)]['includes'](_0x3b03cd)){const _0x4848b1=await fetch(_0x286acc(0x23d)+_0x2a0b12+'&subject='+encodeURIComponent(_0x3b03cd)),_0x518b9d=await _0x4848b1[_0x286acc(0x241)]();if(_0x518b9d[_0x286acc(0x201)]==='ok'&&_0x518b9d[_0x286acc(0x1b6)]?.[_0x286acc(0x1a1)]){const _0x2ffa01=_0x518b9d[_0x286acc(0x1b6)][_0x286acc(0x247)]('\x0a');_0xf7affe='Study\x20guide:\x0a'+_0x2ffa01+_0x286acc(0x1d3)+_0xf7affe;}}}catch(_0x12ea31){console[_0x286acc(0x25b)]('Error\x20fetching\x20study\x20guide:',_0x12ea31);}return await getAIResponse(_0xf7affe);}async function processClipboard(_0x390f76=null,_0x3a80da=![]){const _0x45e24c=a3_0x2243;if(isBusy)return;isBusy=!![],setCursorLoading(!![]);let _0x398d5f='';try{let {apiKey:_0x281c69,expiryTimestamp:_0x213137}=await safeGetStorage([_0x45e24c(0x221),_0x45e24c(0x1bf)]),_0x2965ca=(_0x390f76||await getClipboardText())[_0x45e24c(0x1b7)]();if(!_0x2965ca&&!_0x281c69)throw new Error(_0x45e24c(0x1dc));if(!_0x281c69&&_0x2965ca[_0x45e24c(0x1f0)](_0x45e24c(0x254))){const _0x58a7f3=await activateKey(_0x2965ca),_0x234955=_0x58a7f3?'‚úÖ\x20Key\x20Activated!\x20Access\x20granted.':_0x45e24c(0x1b5);if(_0x58a7f3)_0x281c69=_0x2965ca;await copyToClipboard(_0x234955);if(_0x3a80da)_0x398d5f=_0x234955;return _0x398d5f;}const _0x29526e=_0x213137&&Date[_0x45e24c(0x22d)]()<_0x213137||!!_0x281c69,_0x1747fc=await getUserType();!_0x29526e&&_0x3a80da&&(_0x398d5f=_0x45e24c(0x255));if(!_0x29526e&&!_0x3a80da)return await copyToClipboard(_0x45e24c(0x243)),_0x45e24c(0x243);!_0x2965ca&&_0x281c69&&(_0x2965ca='');const {answer:_0x105bb,chunks:_0x17b025}=await getAIResponseWithGuide(_0x2965ca)||{};if(_0x17b025?.[_0x45e24c(0x1a1)])showChunksPopup(_0x17b025);const _0x5551d6=_0x105bb||'‚ö†\x20AI\x20returned\x20no\x20response.';await copyToClipboard(_0x5551d6);if(_0x3a80da)_0x398d5f=_0x5551d6;}catch(_0x43e77e){console['error'](_0x45e24c(0x1e6),_0x43e77e);if(_0x3a80da)_0x398d5f=_0x45e24c(0x1df);}finally{isBusy=![],setCursorLoading(![]);}return _0x398d5f;}function showPopupInput(){const _0x42de2b=a3_0x2243;if(document[_0x42de2b(0x231)](_0x42de2b(0x1d6)))return;const _0x505911=document[_0x42de2b(0x251)](_0x42de2b(0x22b));_0x505911['id']=_0x42de2b(0x1d6),Object['assign'](_0x505911[_0x42de2b(0x20e)],{'position':_0x42de2b(0x1d8),'top':_0x42de2b(0x1e4),'left':'50%','transform':_0x42de2b(0x1f6),'width':_0x42de2b(0x1bb),'zIndex':_0x42de2b(0x1c7),'padding':'10px','backgroundColor':_0x42de2b(0x1bd),'border':_0x42de2b(0x249),'borderRadius':_0x42de2b(0x1e8),'boxShadow':_0x42de2b(0x237)});const _0x2adf65=document[_0x42de2b(0x251)](_0x42de2b(0x1e2));_0x2adf65[_0x42de2b(0x1ea)]='√ó',Object['assign'](_0x2adf65[_0x42de2b(0x20e)],{'position':_0x42de2b(0x21c),'top':_0x42de2b(0x1ee),'right':_0x42de2b(0x1e8),'border':_0x42de2b(0x252),'background':_0x42de2b(0x1c4),'fontSize':_0x42de2b(0x1ad),'cursor':_0x42de2b(0x1f1),'lineHeight':'1'}),_0x2adf65[_0x42de2b(0x206)]('click',()=>_0x505911[_0x42de2b(0x1b0)]()),_0x505911[_0x42de2b(0x232)](_0x2adf65);const _0x5c667b=document['createElement'](_0x42de2b(0x244));_0x5c667b['id']=_0x42de2b(0x1c8),_0x5c667b[_0x42de2b(0x207)]=_0x42de2b(0x21f),Object[_0x42de2b(0x223)](_0x5c667b[_0x42de2b(0x20e)],{'width':_0x42de2b(0x1a9),'height':_0x42de2b(0x1bc),'fontSize':'16px','marginBottom':_0x42de2b(0x1e8),'padding':'8px','boxSizing':_0x42de2b(0x24d)}),_0x505911[_0x42de2b(0x232)](_0x5c667b);const _0x2453be=document[_0x42de2b(0x251)]('button');_0x2453be['textContent']=_0x42de2b(0x1a2),Object[_0x42de2b(0x223)](_0x2453be['style'],{'padding':_0x42de2b(0x1b8),'fontSize':'16px','cursor':_0x42de2b(0x1f1),'marginBottom':_0x42de2b(0x1de)}),_0x505911[_0x42de2b(0x232)](_0x2453be);const _0x4e5ae0=document['createElement']('div');_0x4e5ae0['id']='clipkey-popup-response',Object[_0x42de2b(0x223)](_0x4e5ae0[_0x42de2b(0x20e)],{'whiteSpace':'pre-wrap','fontSize':_0x42de2b(0x212),'maxHeight':_0x42de2b(0x236),'overflowY':'auto','marginTop':'8px'}),_0x505911[_0x42de2b(0x232)](_0x4e5ae0);async function _0x2e7987(){const _0x4c59a4=_0x42de2b,_0x270eae=_0x5c667b[_0x4c59a4(0x217)]['trim']();if(!_0x270eae)return;_0x4e5ae0[_0x4c59a4(0x1ea)]=_0x4c59a4(0x225);const _0x1b0620=await processClipboard(_0x270eae,!![]);_0x4e5ae0[_0x4c59a4(0x1ea)]=_0x1b0620||_0x4c59a4(0x23b),_0x5c667b['value']='';}_0x2453be['addEventListener'](_0x42de2b(0x208),_0x2e7987),_0x505911['addEventListener']('keydown',async _0x4e9515=>{const _0x2c4de7=_0x42de2b;(_0x4e9515[_0x2c4de7(0x1f4)]||_0x4e9515[_0x2c4de7(0x1b3)])&&_0x4e9515[_0x2c4de7(0x1ce)]===_0x2c4de7(0x20c)&&(_0x4e9515[_0x2c4de7(0x1ec)](),await _0x2e7987());if(_0x4e9515[_0x2c4de7(0x1ce)]===_0x2c4de7(0x200))_0x505911[_0x2c4de7(0x1b0)]();}),document[_0x42de2b(0x1c6)][_0x42de2b(0x232)](_0x505911),_0x5c667b[_0x42de2b(0x20a)](),_0x505911[_0x42de2b(0x1d5)]=-0x1,_0x505911[_0x42de2b(0x20a)]();}function showChunksPopup(_0x470643){const _0x8eaa6b=a3_0x2243;if(document[_0x8eaa6b(0x231)]('clipkey-chunks-popup'))return;const _0x561507=document[_0x8eaa6b(0x251)](_0x8eaa6b(0x22b));_0x561507['id']='clipkey-chunks-popup',Object['assign'](_0x561507['style'],{'position':_0x8eaa6b(0x1d8),'bottom':_0x8eaa6b(0x1de),'right':'10px','width':'300px','maxHeight':_0x8eaa6b(0x21b),'overflowY':_0x8eaa6b(0x24c),'zIndex':'10000','padding':'10px','backgroundColor':_0x8eaa6b(0x233),'border':_0x8eaa6b(0x257),'borderRadius':_0x8eaa6b(0x1e8),'boxShadow':_0x8eaa6b(0x237)});const _0x38a286=document[_0x8eaa6b(0x251)](_0x8eaa6b(0x22b));_0x38a286['textContent']=_0x8eaa6b(0x1d4),_0x38a286[_0x8eaa6b(0x20e)][_0x8eaa6b(0x1e5)]=_0x8eaa6b(0x211),_0x38a286[_0x8eaa6b(0x20e)]['marginBottom']=_0x8eaa6b(0x1e8),_0x561507[_0x8eaa6b(0x232)](_0x38a286),_0x470643['forEach']((_0x1ef6a5,_0x9a7edc)=>{const _0x5385fd=_0x8eaa6b,_0x2bfb7f=document[_0x5385fd(0x251)](_0x5385fd(0x22b));_0x2bfb7f[_0x5385fd(0x1ea)]=_0x9a7edc+0x1+'.\x20'+(_0x1ef6a5[_0x5385fd(0x240)]||_0x1ef6a5),Object[_0x5385fd(0x223)](_0x2bfb7f[_0x5385fd(0x20e)],{'marginBottom':_0x5385fd(0x1e3),'fontSize':'13px','lineHeight':_0x5385fd(0x1db)}),_0x561507[_0x5385fd(0x232)](_0x2bfb7f);});const _0x478b8c=document['createElement'](_0x8eaa6b(0x1e2));_0x478b8c[_0x8eaa6b(0x1ea)]='√ó',Object['assign'](_0x478b8c[_0x8eaa6b(0x20e)],{'position':'absolute','top':_0x8eaa6b(0x1ee),'right':_0x8eaa6b(0x1e8),'border':_0x8eaa6b(0x252),'background':_0x8eaa6b(0x1c4),'fontSize':_0x8eaa6b(0x22a),'cursor':'pointer'}),_0x478b8c[_0x8eaa6b(0x256)]=()=>_0x561507['remove'](),_0x561507[_0x8eaa6b(0x232)](_0x478b8c),document[_0x8eaa6b(0x1c6)][_0x8eaa6b(0x232)](_0x561507);}async function silentInsertAtCaret(_0x378711){const _0x4b946c=a3_0x2243;try{const _0x4af45d=document['activeElement'];if(!_0x4af45d)throw new Error(_0x4b946c(0x245));if(_0x4af45d[_0x4b946c(0x24b)]===_0x4b946c(0x1b4)||_0x4af45d[_0x4b946c(0x24b)]===_0x4b946c(0x1c2)){const _0x2824b3=_0x4af45d[_0x4b946c(0x21e)],_0x3a9683=_0x4af45d['selectionEnd'],_0x2fcc09=_0x4af45d[_0x4b946c(0x217)][_0x4b946c(0x248)](0x0,_0x2824b3),_0x35c3fa=_0x4af45d['value'][_0x4b946c(0x248)](_0x3a9683);_0x4af45d['value']=_0x2fcc09+_0x378711+_0x35c3fa,_0x4af45d[_0x4b946c(0x21e)]=_0x4af45d[_0x4b946c(0x20b)]=_0x2824b3+_0x378711[_0x4b946c(0x1a1)],_0x4af45d['dispatchEvent'](new InputEvent('input',{'bubbles':!![],'inputType':_0x4b946c(0x1ff),'data':_0x378711}));}else{if(_0x4af45d[_0x4b946c(0x224)]){const _0x32b56b=window['getSelection']();if(!_0x32b56b['rangeCount'])throw new Error(_0x4b946c(0x210));const _0x54ab55=_0x32b56b[_0x4b946c(0x1cd)](0x0);_0x54ab55['deleteContents'](),_0x54ab55[_0x4b946c(0x1fb)](document[_0x4b946c(0x1af)](_0x378711)),_0x54ab55['collapse'](![]),_0x4af45d[_0x4b946c(0x216)](new InputEvent(_0x4b946c(0x234),{'bubbles':!![],'inputType':_0x4b946c(0x1ff),'data':_0x378711}));}else throw new Error(_0x4b946c(0x1cb));}return!![];}catch(_0x3e58d5){return console[_0x4b946c(0x25b)](_0x4b946c(0x1cf),_0x3e58d5),![];}}async function pasteAtCaretUltraStealth(_0x57ecf4){const _0x1ad6b1=a3_0x2243,_0x32869a=await silentInsertAtCaret(_0x57ecf4);if(!_0x32869a)try{document[_0x1ad6b1(0x230)]('insertText',![],_0x57ecf4);}catch{}}document[a3_0x32e586(0x206)]('keydown',async _0x221e73=>{const _0x21b860=a3_0x32e586,_0x5c17db=await getUserType(),_0x3d8235=_0x221e73['ctrlKey']||_0x221e73[_0x21b860(0x1b3)],_0x23fe72=_0x221e73[_0x21b860(0x220)],_0x2c826f=_0x221e73[_0x21b860(0x1ed)],_0x300de1=_0x221e73[_0x21b860(0x1ce)][_0x21b860(0x204)]();try{if(_0x3d8235&&_0x23fe72&&_0x2c826f&&_0x300de1==='x'){_0x221e73[_0x21b860(0x1ec)](),leftClickEnabled=!leftClickEnabled,console[_0x21b860(0x22e)]('Left-click\x20auto-copy:\x20'+(leftClickEnabled?'ON':_0x21b860(0x202)));return;}if(_0x3d8235&&_0x23fe72&&!_0x2c826f)switch(_0x300de1){case'x':_0x221e73[_0x21b860(0x1ec)](),await processClipboard();break;case'h':_0x221e73[_0x21b860(0x1ec)](),showPopupInput();break;case'e':_0x221e73[_0x21b860(0x1ec)]();const _0x4074e1=window[_0x21b860(0x242)]()[_0x21b860(0x1a8)]();if(_0x4074e1)await copyToClipboard(_0x4074e1);break;case'v':if(_0x5c17db===_0x21b860(0x21d)||_0x5c17db===_0x21b860(0x1c9)){_0x221e73[_0x21b860(0x1ec)]();const _0x55e7ea=await getClipboardText();await pasteAtCaretUltraStealth(_0x55e7ea);}break;}}catch(_0x6494a9){console['error'](_0x21b860(0x222),_0x6494a9);}}),document[a3_0x32e586(0x206)]('click',async _0x2c9500=>{const _0x462e4c=a3_0x32e586;if(_0x2c9500[_0x462e4c(0x1e2)]!==0x0||!leftClickEnabled)return;try{const _0x340897=await getUserType();if(_0x340897!==_0x462e4c(0x1c9))return;const _0x569667=_0x2c9500['target'];if(_0x569667[_0x462e4c(0x24b)]===_0x462e4c(0x1c2)||_0x569667[_0x462e4c(0x24b)]===_0x462e4c(0x1b4)||_0x569667[_0x462e4c(0x224)])return;const _0x449e47=window[_0x462e4c(0x242)]();if(_0x449e47&&_0x449e47['toString']()[_0x462e4c(0x1b7)]()['length']>0x0)return;const _0x2dfac6=document['caretRangeFromPoint']?document[_0x462e4c(0x1b9)](_0x2c9500[_0x462e4c(0x205)],_0x2c9500[_0x462e4c(0x22f)]):document['caretPositionFromPoint']?((()=>{const _0x2ae98d=_0x462e4c,_0x3898ff=document['caretPositionFromPoint'](_0x2c9500[_0x2ae98d(0x205)],_0x2c9500[_0x2ae98d(0x22f)]),_0x4e0e85=document[_0x2ae98d(0x1e7)]();return _0x4e0e85[_0x2ae98d(0x218)](_0x3898ff[_0x2ae98d(0x21a)],_0x3898ff['offset']),_0x4e0e85['collapse'](!![]),_0x4e0e85;})()):null;if(!_0x2dfac6||!_0x2dfac6['startContainer']||_0x2dfac6[_0x462e4c(0x1c0)]['nodeType']!==Node[_0x462e4c(0x246)])return;const _0x359634=_0x2dfac6[_0x462e4c(0x1c0)],_0x438860=_0x359634[_0x462e4c(0x1ea)];if(!_0x438860)return;const _0x27b6bf=_0x2dfac6[_0x462e4c(0x1b2)],_0x7c383e=_0x438860[_0x462e4c(0x1be)](0x0,_0x27b6bf),_0x4b5794=_0x438860[_0x462e4c(0x1be)](_0x27b6bf),_0x49ffb4=Math['max'](_0x7c383e[_0x462e4c(0x227)]('.'),_0x7c383e[_0x462e4c(0x227)]('!'),_0x7c383e['lastIndexOf']('?'))+0x1||0x0,_0x4175c7=_0x27b6bf+Math[_0x462e4c(0x1f8)](_0x4b5794[_0x462e4c(0x1d1)]('.')>-0x1?_0x4b5794['indexOf']('.'):_0x4b5794['length'],_0x4b5794[_0x462e4c(0x1d1)]('!')>-0x1?_0x4b5794[_0x462e4c(0x1d1)]('!'):_0x4b5794[_0x462e4c(0x1a1)],_0x4b5794[_0x462e4c(0x1d1)]('?')>-0x1?_0x4b5794[_0x462e4c(0x1d1)]('?'):_0x4b5794[_0x462e4c(0x1a1)]),_0x414922=_0x438860['slice'](_0x49ffb4,_0x4175c7)[_0x462e4c(0x1b7)]();if(!_0x414922)return;!sentenceBuffer[_0x462e4c(0x219)](_0x3bd3e8=>_0x3bd3e8[_0x462e4c(0x204)]()===_0x414922['toLowerCase']())&&(sentenceBuffer[_0x462e4c(0x1ef)](_0x414922),console[_0x462e4c(0x22e)]('Buffered\x20sentence:',_0x414922));if(copyTimeout)clearTimeout(copyTimeout);copyTimeout=setTimeout(async()=>{const _0x28348e=_0x462e4c,_0x480ca0=sentenceBuffer['join']('\x20');await copyToClipboard(_0x480ca0),console[_0x28348e(0x22e)](_0x28348e(0x250),_0x480ca0),sentenceBuffer=[],copyTimeout=null;},0x1388);}catch(_0x549500){console['error']('Click\x20handler\x20error:',_0x549500);}}),document[a3_0x32e586(0x206)](a3_0x32e586(0x208),async _0x5ad71f=>{const _0x334dca=a3_0x32e586,_0x16aee5=_0x5ad71f['target']['closest'](_0x334dca(0x1f9));if(!_0x16aee5)return;console[_0x334dca(0x22e)](_0x334dca(0x1b1));const _0x5d00c2=_0x16aee5['closest'](_0x334dca(0x1c1));if(!_0x5d00c2){console[_0x334dca(0x25b)]('‚ùå\x20Could\x20not\x20find\x20question\x20wrapper');return;}const _0x6c142f=_0x5d00c2[_0x334dca(0x1ca)](_0x334dca(0x23a));if(!_0x6c142f){console[_0x334dca(0x25b)](_0x334dca(0x1a5));return;}const _0x228cb6=_0x6c142f['innerText'][_0x334dca(0x1b7)](),_0x464972=[..._0x5d00c2[_0x334dca(0x1f7)]('.answer\x20.d-flex')];_0x464972[_0x334dca(0x1a1)]<0x2&&console[_0x334dca(0x253)](_0x334dca(0x1cc));const _0x10783c=_0x464972[_0x334dca(0x1be)](0x0,0x2)[_0x334dca(0x238)](_0x53cc2e=>_0x53cc2e['innerText'][_0x334dca(0x1b7)]())[_0x334dca(0x247)]('\x0a'),_0xaebe8e=_0x334dca(0x214)+_0x228cb6+_0x334dca(0x24e)+_0x10783c;console['log'](_0x334dca(0x25a),_0xaebe8e);const _0x5300c6=await getAIResponse(_0xaebe8e);if(!_0x5300c6?.[_0x334dca(0x209)]){console[_0x334dca(0x25b)](_0x334dca(0x1ab));return;}const _0x4b1766=_0x5300c6[_0x334dca(0x209)][_0x334dca(0x1b7)]();console['log']('ü§ñ\x20AI\x20Answer:',_0x4b1766);const _0x1415ea=_0x5d00c2[_0x334dca(0x1ca)]('textarea');if(!_0x1415ea){console[_0x334dca(0x25b)]('‚ùå\x20No\x20textarea\x20found\x20to\x20insert\x20answer');return;}_0x1415ea['value']=_0x4b1766,_0x1415ea[_0x334dca(0x216)](new InputEvent(_0x334dca(0x234),{'bubbles':!![]})),console['log'](_0x334dca(0x22c));});function a3_0x369b(){const _0x3957e5=['1568EdtYIn','runtime','1.4','No\x20text\x20found\x20and\x20no\x20key\x20available.','chrome.storage.local\x20unavailable','10px','‚ö†\x20Error\x20processing\x20text.','üìö\x20Relevant\x20Study\x20Guide\x20Chunks:','getClipboardText\x20error:','button','6px','20%','fontWeight','processClipboard\x20error:','createRange','8px','lastError','textContent','\x20failed:','preventDefault','altKey','5px','push','startsWith','pointer','useGuide','expiry','ctrlKey','cursor','translateX(-50%)','querySelectorAll','min','a.aabtn[title=\x27Flag\x20this\x20question\x20for\x20future\x20reference\x27]','safeSetStorage\x20failed\x20after\x20retries.','insertNode','1076081bqNfCt','safeSetStorage\x20attempt\x20','free','insertText','Escape','status','OFF','https://clipkey-server.onrender.com/api/studyguide/subjects?apiKey=','toLowerCase','clientX','addEventListener','placeholder','click','answer','focus','selectionEnd','Enter','result','style','topChunks','No\x20selection\x20range.','bold','14px','-2000px','Question:\x0a','documentElement','dispatchEvent','value','setStart','some','offsetNode','400px','absolute','daily','selectionStart','Enter\x20text\x20or\x20API\x20key...','shiftKey','apiKey','keydown\x20handler\x20error:','assign','isContentEditable','‚è≥\x20Processing...','select','lastIndexOf','26778ToFiIA','application/json','16px','div','‚úÖ\x20Answer\x20inserted\x20into\x20question\x20textarea','now','log','clientY','execCommand','getElementById','appendChild','#fff','input','type','200px','0\x204px\x2012px\x20rgba(0,0,0,0.2)','map','local','.qtext','‚ö†\x20AI\x20returned\x20no\x20response.','139119QxKZsM','https://clipkey-server.onrender.com/api/studyguide/content?apiKey=','stringify','subjects','chunk','json','getSelection','‚ùå\x20ClipKey\x20is\x20not\x20activated\x20or\x20key\x20expired.','textarea','No\x20active\x20element.','TEXT_NODE','join','substring','2px\x20solid\x20#ccc','10aJFeAp','tagName','auto','border-box','\x0a\x0aOptions:\x0a','readText','Copied\x20to\x20clipboard:','createElement','none','warn','bnh','‚ö†\x20Free\x20mode:\x20AI\x20will\x20respond,\x20but\x20some\x20features\x20may\x20be\x20disabled.','onclick','1px\x20solid\x20#ccc','26TCkHpp','clipboard','üì§\x20Prompt\x20for\x20AI:\x0a','error','8296664ktQIow','length','Send','copyToClipboard\x20fallback\x20failed:','writeText','‚ùå\x20No\x20.qtext\x20found','progress','data','toString','100%','https://clipkey-server.onrender.com/ai','‚ùå\x20AI\x20returned\x20no\x20answer','3846495ewauLM','20px','3535876HdzDsN','createTextNode','remove','üìå\x20Flag\x20button\x20clicked\x20‚Äî\x20extracting\x20question...','startOffset','metaKey','TEXTAREA','‚ùå\x20Invalid\x20Key.','chunks','trim','8px\x2016px','caretRangeFromPoint','storage','60%','100px','white','slice','expiryTimestamp','startContainer','.que','INPUT','5548401zfvSND','transparent','safeGetStorage\x20attempt\x20','body','10000','clipkey-popup-input','monthly','querySelector','Active\x20element\x20not\x20supported.','‚ö†\x20Less\x20than\x202\x20options\x20found,\x20using\x20available\x20ones','getRangeAt','key','silentInsertAtCaret\x20failed:','POST','indexOf','position','\x0a\x0aQuestion:\x0a','üìö\x20Relevant\x20Study\x20Guide\x20Chunks','tabIndex','clipkey-popup-container','selectedSubject','fixed'];a3_0x369b=function(){return _0x3957e5;};return a3_0x369b();}